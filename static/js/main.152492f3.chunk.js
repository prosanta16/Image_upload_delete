(this["webpackJsonpimage-upload"]=this["webpackJsonpimage-upload"]||[]).push([[0],{16:function(e,t,i){},17:function(e,t,i){},18:function(e,t,i){"use strict";i.r(t);var s=i(0),n=i(1),r=i.n(n),a=i(3),l=i.n(a),o=(i(16),i(4)),c=i(5),p=i(7),u=i(6),h=i(10),f=i(2),d=(i(17),i(9)),m=i.p+"static/media/UploadIcon.469126df.svg",b={display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap",width:"100%"},g="NOT_SUPPORTED_EXTENSION",v="FILESIZE_TOO_LARGE",j=function(e){Object(p.a)(i,e);var t=Object(u.a)(i);function i(e){var s;return Object(o.a)(this,i),(s=t.call(this,e)).state={pictures:Object(h.a)(e.defaultImages),files:[],fileErrors:[]},s.inputElement="",s.onDropFile=s.onDropFile.bind(Object(f.a)(s)),s.onUploadClick=s.onUploadClick.bind(Object(f.a)(s)),s.triggerFileUpload=s.triggerFileUpload.bind(Object(f.a)(s)),s}return Object(c.a)(i,[{key:"componentDidUpdate",value:function(e,t,i){t.files!==this.state.files&&this.props.onChange(this.state.files,this.state.pictures)}},{key:"componentWillReceiveProps",value:function(e){e.defaultImages!==this.props.defaultImages&&this.setState({pictures:e.defaultImages})}},{key:"hasExtension",value:function(e){var t="("+this.props.imgExtension.join("|").replace(/\./g,"\\.")+")$";return new RegExp(t,"i").test(e)}},{key:"onDropFile",value:function(e){for(var t=this,i=e.target.files,s=[],n=[],r=0;r<i.length;r++){var a=i[r],l={name:a.name};this.hasExtension(a.name)?a.size>this.props.maxFileSize?(l=Object.assign(l,{type:v}),n.push(l)):s.push(this.readFile(a)):(l=Object.assign(l,{type:g}),n.push(l))}this.setState({fileErrors:n});var o=this.props.singleImage;Promise.all(s).then((function(e){var i=o?[]:t.state.pictures.slice(),s=o?[]:t.state.files.slice();e.forEach((function(e){i.push(e.dataURL),s.push(e.file)})),t.setState({pictures:i,files:s})}))}},{key:"onUploadClick",value:function(e){e.target.value=null}},{key:"readFile",value:function(e){return new Promise((function(t,i){var s=new FileReader;s.onload=function(i){var s=i.target.result;s=s.replace(";base64",";name=".concat(e.name,";base64")),t({file:e,dataURL:s})},s.readAsDataURL(e)}))}},{key:"removeImage",value:function(e){var t=this,i=this.state.pictures.findIndex((function(t){return t===e})),s=this.state.pictures.filter((function(e,t){return t!==i})),n=this.state.files.filter((function(e,t){return t!==i}));this.setState({pictures:s,files:n},(function(){t.props.onChange(t.state.files,t.state.pictures)}))}},{key:"renderErrors",value:function(){var e=this;return this.state.fileErrors.map((function(t,i){return Object(s.jsxs)("div",{className:"errorMessage "+e.props.errorClass,style:e.props.errorStyle,children:["* ",t.name," ",t.type===v?e.props.fileSizeError:e.props.fileTypeError]},i)}))}},{key:"renderIcon",value:function(){if(this.props.withIcon)return Object(s.jsx)("img",{src:m,className:"uploadIcon",alt:"Upload Icon"})}},{key:"renderLabel",value:function(){if(this.props.withLabel)return Object(s.jsx)("p",{className:this.props.labelClass,style:this.props.labelStyles,children:this.props.label})}},{key:"renderPreview",value:function(){return Object(s.jsx)("div",{className:"uploadPicturesWrapper",children:Object(s.jsx)(d.a,{enterAnimation:"fade",leaveAnimation:"fade",style:b,children:this.renderPreviewPictures()})})}},{key:"renderPreviewPictures",value:function(){var e=this;return this.state.pictures.map((function(t,i){return Object(s.jsxs)("div",{className:"uploadPictureContainer",children:[Object(s.jsx)("div",{className:"deleteImage",onClick:function(){return e.removeImage(t)},children:"X"}),Object(s.jsx)("img",{src:t,className:"uploadPicture",alt:"preview"})]},i)}))}},{key:"triggerFileUpload",value:function(){this.inputElement.click()}},{key:"clearPictures",value:function(){this.setState({pictures:[]})}},{key:"render",value:function(){var e=this;return Object(s.jsx)("div",{className:"fileUploader "+this.props.className,style:this.props.style,children:Object(s.jsxs)("div",{className:"fileContainer",style:this.props.fileContainerStyle,children:[this.renderIcon(),this.renderLabel(),Object(s.jsx)("div",{className:"errorsContainer",children:this.renderErrors()}),Object(s.jsx)("button",{type:this.props.buttonType,className:"chooseFileButton "+this.props.buttonClassName,style:this.props.buttonStyles,onClick:this.triggerFileUpload,children:this.props.buttonText}),Object(s.jsx)("input",{type:"file",ref:function(t){return e.inputElement=t},name:this.props.name,multiple:!this.props.singleImage,onChange:this.onDropFile,onClick:this.onUploadClick,accept:this.props.accept}),this.props.withPreview?this.renderPreview():null]})})}}]),i}(r.a.Component);j.defaultProps={className:"",fileContainerStyle:{},buttonClassName:"",buttonStyles:{},withPreview:!1,accept:"image/*",name:"",withIcon:!0,buttonText:"Choose images",buttonType:"button",withLabel:!0,label:"Max file size: 5mb, accepted: jpg|gif|png",labelStyles:{},labelClass:"",imgExtension:[".jpg",".jpeg",".gif",".png"],maxFileSize:5242880,fileSizeError:" file size is too big",fileTypeError:" is not a supported file extension",errorClass:"",style:{},errorStyle:{},singleImage:!1,onChange:function(){},defaultImages:[]};var y=j,O=function(e){Object(p.a)(i,e);var t=Object(u.a)(i);function i(){return Object(o.a)(this,i),t.apply(this,arguments)}return Object(c.a)(i,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"page",children:Object(s.jsx)(y,{style:{maxWidth:"500px",margin:"20px auto"},withPreview:!0})})}}]),i}(r.a.PureComponent),x=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,19)).then((function(t){var i=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,a=t.getTTFB;i(e),s(e),n(e),r(e),a(e)}))};l.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(O,{})}),document.getElementById("root")),x()}},[[18,1,2]]]);
//# sourceMappingURL=main.152492f3.chunk.js.map